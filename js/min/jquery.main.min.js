function initCycleCarousel(){jQuery(".cycle-gallery").scrollAbsoluteGallery({mask:".mask",slider:".slideset",slides:".slide",btnPrev:"a.btn-prev",btnNext:"a.btn-next",generatePagination:".pagination",stretchSlideToMask:!0,maskAutoSize:!0,autoRotation:!0,switchTime:4e3,animSpeed:500})}function initOpenClose(){jQuery(".open-close").openClose({activeClass:"active",opener:".opener",slider:".slide",animSpeed:400,effect:"slide"})}function initSameHeight(){jQuery(".item-box").sameHeight({elements:".item",flexible:!0,multiLine:!0})}function initMultiColumns(){jQuery(".article-content").columnize({buildOnce:!0,columns:2})}function initScalingNavigation(){initAutoScalingNav({menuId:"nav",sideClasses:!0,flexible:!0})}function initAutoScalingNav(t){function e(t){for(var e=0,i=0;i<t.length;i++)e+=t[i].width;return e}t.menuId||(t.menuId="nav"),t.tag||(t.tag="a"),t.spacing||(t.spacing=0),t.constant||(t.constant=0),t.minPaddings||(t.minPaddings=0),t.liHovering||(t.liHovering=!1),t.sideClasses||(t.sideClasses=!1),t.equalLinks||(t.equalLinks=!1),t.flexible||(t.flexible=!1);var i=document.getElementById(t.menuId);if(i){i.className+=" scaling-active";for(var n=i.getElementsByTagName("li"),s=[],o=[],r=0,a=0,h=0;a<n.length;a++){if(n[a].parentNode==i){var l=n[a].getElementsByTagName(t.tag).item(0);s.push(l),s[h++].width=l.offsetWidth,o.push(n[a]),r<l.offsetWidth&&(r=l.offsetWidth)}t.liHovering&&(n[a].onmouseover=function(){this.className+=" hover"},n[a].onmouseout=function(){this.className=this.className.replace("hover","")})}var c=i.clientWidth-s.length*t.spacing-t.constant;if(t.equalLinks&&r*s.length<c)for(var a=0;a<s.length;a++)s[a].width=r;if(r=e(s),c>r){for(var a=0;e(s)<c;a++)s[a].width++,t.flexible||(s[a].style.width=s[a].width+"px"),a>=s.length-1&&(a=-1);if(t.flexible)for(var a=0;a<s.length;a++)r=(s[a].width-t.spacing-t.constant/s.length)/c*100,a!=s.length-1?o[a].style.width=r+"%":/MSIE (6|7)/.test(navigator.userAgent)||(o[a].style.width=r+"%")}else if(t.minPaddings>0)for(var a=0;a<s.length;a++)s[a].style.paddingLeft=t.minPaddings+"px",s[a].style.paddingRight=t.minPaddings+"px";t.sideClasses&&(o[0].className+=" first-child",o[0].getElementsByTagName(t.tag).item(0).className+=" first-child-a",o[o.length-1].className+=" last-child",o[o.length-1].getElementsByTagName(t.tag).item(0).className+=" last-child-a"),i.className+=" scaling-ready"}}jQuery(function(){initCycleCarousel(),initOpenClose(),FontResize.init(),initSameHeight(),initMultiColumns(),initScalingNavigation()}),function(t){function e(e){this.options=t.extend({activeClass:"active",mask:"div.slides-mask",slider:">ul",slides:">li",btnPrev:".btn-prev",btnNext:".btn-next",pagerLinks:"ul.pager > li",generatePagination:!1,pagerList:"<ul>",pagerListItem:'<li><a href="#"></a></li>',pagerListItemText:"a",galleryReadyClass:"gallery-js-ready",currentNumber:"span.current-num",totalNumber:"span.total-num",maskAutoSize:!1,autoRotation:!1,pauseOnHover:!1,stretchSlideToMask:!1,switchTime:3e3,animSpeed:500,handleTouch:!0,swipeThreshold:15,vertical:!1},e),this.init()}e.prototype={init:function(){this.options.holder&&(this.findElements(),this.attachEvents(),this.makeCallback("onInit",this))},findElements:function(){this.holder=t(this.options.holder).addClass(this.options.galleryReadyClass),this.mask=this.holder.find(this.options.mask),this.slider=this.mask.find(this.options.slider),this.slides=this.slider.find(this.options.slides),this.btnPrev=this.holder.find(this.options.btnPrev),this.btnNext=this.holder.find(this.options.btnNext),this.currentNumber=this.holder.find(this.options.currentNumber),this.totalNumber=this.holder.find(this.options.totalNumber),this.pagerLinks="string"==typeof this.options.generatePagination?this.buildPagination():this.holder.find(this.options.pagerLinks),this.sizeProperty=this.options.vertical?"height":"width",this.positionProperty=this.options.vertical?"top":"left",this.animProperty=this.options.vertical?"marginTop":"marginLeft",this.slideSize=this.slides[this.sizeProperty](),this.currentIndex=0,this.prevIndex=0,this.options.maskAutoSize=this.options.vertical?!1:this.options.maskAutoSize,this.options.vertical&&this.mask.css({height:this.slides.innerHeight()}),this.options.maskAutoSize&&this.mask.css({height:this.slider.height()}),this.slider.css({position:"relative",height:this.options.vertical?this.slideSize*this.slides.length:"100%"}),this.slides.css({position:"absolute"}).css(this.positionProperty,-9999).eq(this.currentIndex).css(this.positionProperty,0),this.refreshState()},buildPagination:function(){var e=t();if(this.pagerHolder||(this.pagerHolder=this.holder.find(this.options.generatePagination)),this.pagerHolder.length){this.pagerHolder.empty(),this.pagerList=t(this.options.pagerList).appendTo(this.pagerHolder);for(var i=0;i<this.slides.length;i++)t(this.options.pagerListItem).appendTo(this.pagerList).find(this.options.pagerListItemText).text(i+1);e=this.pagerList.children()}return e},attachEvents:function(){var e=this;this.btnPrev.length&&(this.btnPrevHandler=function(t){t.preventDefault(),e.prevSlide()},this.btnPrev.click(this.btnPrevHandler)),this.btnNext.length&&(this.btnNextHandler=function(t){t.preventDefault(),e.nextSlide()},this.btnNext.click(this.btnNextHandler)),this.pagerLinks.length&&(this.pagerLinksHandler=function(t){t.preventDefault(),e.numSlide(e.pagerLinks.index(t.currentTarget))},this.pagerLinks.click(this.pagerLinksHandler)),this.options.pauseOnHover&&(this.hoverHandler=function(){clearTimeout(e.timer)},this.leaveHandler=function(){e.autoRotate()},this.holder.bind({mouseenter:this.hoverHandler,mouseleave:this.leaveHandler})),this.resizeHandler=function(){e.animating||(e.options.stretchSlideToMask&&e.resizeSlides(),e.resizeHolder(),e.setSlidesPosition(e.currentIndex))},t(window).bind("load resize orientationchange",this.resizeHandler),e.options.stretchSlideToMask&&e.resizeSlides(),this.options.handleTouch&&window.Hammer&&this.mask.length&&this.slides.length>1&&i&&(this.swipeHandler=new Hammer.Manager(this.mask[0]),this.swipeHandler.add(new Hammer.Pan({direction:e.options.vertical?Hammer.DIRECTION_VERTICAL:Hammer.DIRECTION_HORIZONTAL,threshold:e.options.swipeThreshold})),this.swipeHandler.on("panstart",function(){e.animating?e.swipeHandler.stop():clearTimeout(e.timer)}).on("panmove",function(t){e.swipeOffset=-e.slideSize+t[e.options.vertical?"deltaY":"deltaX"],e.slider.css(e.animProperty,e.swipeOffset),clearTimeout(e.timer)}).on("panend",function(t){if(t.distance>e.options.swipeThreshold)t.offsetDirection===Hammer.DIRECTION_RIGHT||t.offsetDirection===Hammer.DIRECTION_DOWN?e.nextSlide():e.prevSlide();else{var i={};i[e.animProperty]=-e.slideSize,e.slider.animate(i,{duration:e.options.animSpeed}),e.autoRotate()}e.swipeOffset=0})),this.autoRotate(),this.resizeHolder(),this.setSlidesPosition(this.currentIndex)},resizeSlides:function(){this.slideSize=this.mask[this.options.vertical?"height":"width"](),this.slides.css(this.sizeProperty,this.slideSize)},resizeHolder:function(){this.options.maskAutoSize&&this.mask.css({height:this.slides.eq(this.currentIndex).outerHeight(!0)})},prevSlide:function(){!this.animating&&this.slides.length>1&&(this.direction=-1,this.prevIndex=this.currentIndex,this.currentIndex>0?this.currentIndex--:this.currentIndex=this.slides.length-1,this.switchSlide())},nextSlide:function(){!this.animating&&this.slides.length>1&&(this.direction=1,this.prevIndex=this.currentIndex,this.currentIndex<this.slides.length-1?this.currentIndex++:this.currentIndex=0,this.switchSlide())},numSlide:function(t){!this.animating&&this.currentIndex!==t&&this.slides.length>1&&(this.direction=t>this.currentIndex?1:-1,this.prevIndex=this.currentIndex,this.currentIndex=t,this.switchSlide())},preparePosition:function(){this.setSlidesPosition(this.prevIndex,this.direction<0?this.currentIndex:null,this.direction>0?this.currentIndex:null,this.direction)},setSlidesPosition:function(t,e,i,n){if(this.slides.length>1){var s="number"==typeof e?e:t>0?t-1:this.slides.length-1,o="number"==typeof i?i:t<this.slides.length-1?t+1:0;if(this.slider.css(this.animProperty,this.swipeOffset?this.swipeOffset:-this.slideSize),this.slides.css(this.positionProperty,-9999).eq(t).css(this.positionProperty,this.slideSize),s===o&&"number"==typeof n){var r=n>0?2*this.slideSize:0;this.slides.eq(o).css(this.positionProperty,r)}else this.slides.eq(s).css(this.positionProperty,0),this.slides.eq(o).css(this.positionProperty,2*this.slideSize)}},switchSlide:function(){var t=this,e=(this.slides.eq(this.prevIndex),this.slides.eq(this.currentIndex));this.animating=!0,this.options.maskAutoSize&&this.mask.animate({height:e.outerHeight(!0)},{duration:this.options.animSpeed});var i={};i[this.animProperty]=this.direction>0?2*-this.slideSize:0,this.preparePosition(),this.slider.animate(i,{duration:this.options.animSpeed,complete:function(){t.setSlidesPosition(t.currentIndex),t.animating=!1,t.autoRotate(),t.makeCallback("onChange",t)}}),this.refreshState(),this.makeCallback("onBeforeChange",this)},refreshState:function(){this.slides.removeClass(this.options.activeClass).eq(this.currentIndex).addClass(this.options.activeClass),this.pagerLinks.removeClass(this.options.activeClass).eq(this.currentIndex).addClass(this.options.activeClass),this.currentNumber.html(this.currentIndex+1),this.totalNumber.html(this.slides.length),this.holder.toggleClass("not-enough-slides",1===this.slides.length)},autoRotate:function(){var t=this;clearTimeout(this.timer),this.options.autoRotation&&(this.timer=setTimeout(function(){t.nextSlide()},this.options.switchTime))},makeCallback:function(t){if("function"==typeof this.options[t]){var e=Array.prototype.slice.call(arguments);e.shift(),this.options[t].apply(this,e)}},destroy:function(){this.btnPrev.unbind("click",this.btnPrevHandler),this.btnNext.unbind("click",this.btnNextHandler),this.pagerLinks.unbind("click",this.pagerLinksHandler),this.holder.unbind("mouseenter",this.hoverHandler),this.holder.unbind("mouseleave",this.leaveHandler),t(window).unbind("load resize orientationchange",this.resizeHandler),clearTimeout(this.timer),this.swipeHandler&&this.swipeHandler.destroy(),this.holder.removeClass(this.options.galleryReadyClass),this.slider.add(this.slides).removeAttr("style"),"string"==typeof this.options.generatePagination&&this.pagerHolder.empty()}};var i=/Windows Phone/.test(navigator.userAgent)||"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch;t.fn.scrollAbsoluteGallery=function(i){return this.each(function(){t(this).data("ScrollAbsoluteGallery",new e(t.extend(i,{holder:this})))})}}(jQuery),function(t){function e(e){this.options=t.extend({addClassBeforeAnimation:!0,hideOnClickOutside:!1,activeClass:"active",opener:".opener",slider:".slide",animSpeed:400,effect:"fade",event:"click"},e),this.init()}e.prototype={init:function(){this.options.holder&&(this.findElements(),this.attachEvents(),this.makeCallback("onInit",this))},findElements:function(){this.holder=t(this.options.holder),this.opener=this.holder.find(this.options.opener),this.slider=this.holder.find(this.options.slider)},attachEvents:function(){var e=this;this.eventHandler=function(t){t.preventDefault(),e.slider.hasClass(i)?e.showSlide():e.hideSlide()},e.opener.bind(e.options.event,this.eventHandler),"over"===e.options.event&&(e.opener.bind("mouseenter",function(){e.showSlide()}),e.holder.bind("mouseleave",function(){e.hideSlide()})),e.outsideClickHandler=function(i){if(e.options.hideOnClickOutside){var n=t(i.target);n.is(e.holder)||n.closest(e.holder).length||e.hideSlide()}},this.holder.hasClass(this.options.activeClass)?t(document).bind("click touchstart",e.outsideClickHandler):this.slider.addClass(i)},showSlide:function(){var e=this;e.options.addClassBeforeAnimation&&e.holder.addClass(e.options.activeClass),e.slider.removeClass(i),t(document).bind("click touchstart",e.outsideClickHandler),e.makeCallback("animStart",!0),n[e.options.effect].show({box:e.slider,speed:e.options.animSpeed,complete:function(){e.options.addClassBeforeAnimation||e.holder.addClass(e.options.activeClass),e.makeCallback("animEnd",!0)}})},hideSlide:function(){var e=this;e.options.addClassBeforeAnimation&&e.holder.removeClass(e.options.activeClass),t(document).unbind("click touchstart",e.outsideClickHandler),e.makeCallback("animStart",!1),n[e.options.effect].hide({box:e.slider,speed:e.options.animSpeed,complete:function(){e.options.addClassBeforeAnimation||e.holder.removeClass(e.options.activeClass),e.slider.addClass(i),e.makeCallback("animEnd",!1)}})},destroy:function(){this.slider.removeClass(i).css({display:""}),this.opener.unbind(this.options.event,this.eventHandler),this.holder.removeClass(this.options.activeClass).removeData("OpenClose"),t(document).unbind("click touchstart",this.outsideClickHandler)},makeCallback:function(t){if("function"==typeof this.options[t]){var e=Array.prototype.slice.call(arguments);e.shift(),this.options[t].apply(this,e)}}};var i="js-slide-hidden";!function(){var e=t('<style type="text/css">')[0],n="."+i;n+="{position:absolute !important;left:-9999px !important;top:-9999px !important;display:block !important}",e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n)),t("head").append(e)}();var n={slide:{show:function(t){t.box.stop(!0).hide().slideDown(t.speed,t.complete)},hide:function(t){t.box.stop(!0).slideUp(t.speed,t.complete)}},fade:{show:function(t){t.box.stop(!0).hide().fadeIn(t.speed,t.complete)},hide:function(t){t.box.stop(!0).fadeOut(t.speed,t.complete)}},none:{show:function(t){t.box.hide().show(0,t.complete)},hide:function(t){t.box.hide(0,t.complete)}}};t.fn.openClose=function(i){return this.each(function(){jQuery(this).data("OpenClose",new e(t.extend(i,{holder:this})))})}}(jQuery),function(t){function e(e,o){var r,a=t(),h=0,l=e.eq(0).offset().top;e.each(function(){var e=t(this);e.offset().top===l?a=a.add(this):(r=i(a),h=Math.max(h,n(a,r,o)),a=e,l=e.offset().top)}),a.length&&(r=i(a),h=Math.max(h,n(a,r,o))),o.biggestHeight&&e.css(o.useMinHeight&&s?"minHeight":"height",h)}function i(e){var i=0;return e.each(function(){i=Math.max(i,t(this).outerHeight())}),i}function n(e,i,n){var o,r="number"==typeof i?i:i.height();return e.removeClass(n.leftEdgeClass).removeClass(n.rightEdgeClass).each(function(){var e=t(this),a=0,h="border-box"===e.css("boxSizing")||"border-box"===e.css("-moz-box-sizing")||"border-box"===e.css("-webkit-box-sizing");"number"!=typeof i&&e.parents().each(function(){var e=t(this);return i.is(this)?!1:(a+=e.outerHeight()-e.height(),void 0)}),o=r-a,o-=h?0:e.outerHeight()-e.height(),o>0&&e.css(n.useMinHeight&&s?"minHeight":"height",o)}),e.filter(":first").addClass(n.leftEdgeClass),e.filter(":last").addClass(n.rightEdgeClass),o}t.fn.sameHeight=function(i){var o=t.extend({skipClass:"same-height-ignore",leftEdgeClass:"same-height-left",rightEdgeClass:"same-height-right",elements:">*",flexible:!1,multiLine:!1,useMinHeight:!1,biggestHeight:!1},i);return this.each(function(){function i(){l.css(o.useMinHeight&&s?"minHeight":"height",""),o.multiLine?e(l,o):n(l,h,o)}var r,a,h=t(this),l=h.find(o.elements).not("."+o.skipClass);if(l.length){i();var c=function(){a||(a=!0,i(),clearTimeout(r),r=setTimeout(function(){i(),setTimeout(function(){a=!1},10)},100))};o.flexible&&t(window).bind("resize orientationchange fontresize",c),t(window).bind("load",c)}})};var s="undefined"!=typeof document.documentElement.style.maxHeight}(jQuery),jQuery.onFontResize=function(t){return t(function(){var e="font-resize-frame-"+Math.floor(1e3*Math.random()),i=t("<iframe>").attr("id",e).addClass("font-resize-helper");if(i.css({width:"100em",height:"10px",position:"absolute",borderWidth:0,top:"-9999px",left:"-9999px"}).appendTo("body"),window.attachEvent&&!window.addEventListener)i.bind("resize",function(){t.onFontResize.trigger(i[0].offsetWidth/100)});else{var n=i[0].contentWindow.document;n.open(),n.write('<script>window.onload = function(){var em = parent.jQuery("#'+e+'")[0];window.onresize = function(){if(parent.jQuery.onFontResize){parent.jQuery.onFontResize.trigger(em.offsetWidth / 100);}}};</script>'),n.close()}jQuery.onFontResize.initialSize=i[0].offsetWidth/100}),{trigger:function(e){t(window).trigger("fontresize",[e])}}}(jQuery),FontResize={options:{maxStep:1.5,defaultFS:1.5,resizeStep:.1,resizeHolder:"body",cookieName:"fontResizeCookie"},init:function(){this.runningLocal=0===location.protocol.indexOf("file:"),this.setDefaultScaling(),this.addDefaultHandlers()},addDefaultHandlers:function(){this.addHandler("increase","inc"),this.addHandler("decrease","dec"),this.addHandler("reset")},setDefaultScaling:function(){this.resizeHolder="html"==this.options.resizeHolder?document.documentElement:document.body;var t=this.getCookie(this.options.cookieName);this.fSize=!this.runningLocal&&t?parseFloat(t,10):this.options.defaultFS,this.changeSize()},changeSize:function(t){return"undefined"!=typeof t&&(1==t?(this.fSize+=this.options.resizeStep,this.fSize>this.options.defaultFS*this.options.maxStep&&(this.fSize=this.options.defaultFS*this.options.maxStep)):-1==t?(this.fSize-=this.options.resizeStep,this.fSize<this.options.defaultFS/this.options.maxStep&&(this.fSize=this.options.defaultFS/this.options.maxStep)):this.fSize=this.options.defaultFS),this.resizeHolder.style.fontSize=this.fSize+"em",this.updateCookie(this.fSize.toFixed(2)),"undefined"!=typeof Cufon&&"function"==typeof Cufon.refresh&&Cufon.refresh(),!1},addHandler:function(t,e){if("string"==typeof t&&(t=document.getElementById(t)),t&&t.tagName)switch(e){case"inc":t.onclick=this.bind(this.changeSize,this,[1]);break;case"dec":t.onclick=this.bind(this.changeSize,this,[-1]);break;default:t.onclick=this.bind(this.changeSize,this,[0])}},updateCookie:function(t){this.runningLocal||this.setCookie(this.options.cookieName,t)},getCookie:function(t){var e=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0},setCookie:function(t,e){var i=new Date;i.setTime(i.getTime()+2592e6),document.cookie=t+"="+e+";expires="+i.toGMTString()+";path=/"},bind:function(t,e,i){return function(){return t.apply(e,i||arguments)}}},Object.create&&!function(t,e,i,n){"use strict";function s(t,e,i){return setTimeout(c(t,i),e)}function o(t,e,i){return Array.isArray(t)?(r(t,i[e],i),!0):!1}function r(t,e,i){var s;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==n)for(s=0;s<t.length;)e.call(i,t[s],s,t),s++;else for(s in t)t.hasOwnProperty(s)&&e.call(i,t[s],s,t)}function a(t,e,i){for(var s=Object.keys(e),o=0;o<s.length;)(!i||i&&t[s[o]]===n)&&(t[s[o]]=e[s[o]]),o++;return t}function h(t,e){return a(t,e,!0)}function l(t,e,i){var n,s=e.prototype;n=t.prototype=Object.create(s),n.constructor=t,n._super=s,i&&a(n,i)}function c(t,e){return function(){return t.apply(e,arguments)}}function d(t,e){return typeof t==ce?t.apply(e?e[0]||n:n,e):t}function u(t,e){return t===n?e:t}function f(t,e,i){r(v(e),function(e){t.addEventListener(e,i,!1)})}function p(t,e,i){r(v(e),function(e){t.removeEventListener(e,i,!1)})}function m(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function g(t,e){return t.indexOf(e)>-1}function v(t){return t.trim().split(/\s+/g)}function y(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function b(t){return Array.prototype.slice.call(t,0)}function T(t,e,i){for(var n=[],s=[],o=0;o<t.length;){var r=e?t[o][e]:t[o];y(s,r)<0&&n.push(t[o]),s[o]=r,o++}return i&&(n=e?n.sort(function(t,i){return t[e]>i[e]}):n.sort()),n}function C(t,e){for(var i,s,o=e[0].toUpperCase()+e.slice(1),r=0;r<he.length;){if(i=he[r],s=i?i+o:e,s in t)return s;r++}return n}function x(){return pe++}function S(t){var e=t.ownerDocument;return e.defaultView||e.parentWindow}function w(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){d(t.options.enable,[t])&&i.handler(e)},this.init()}function k(t){var e,i=t.options.inputClass;return new(e=i?i:ve?_:ye?j:ge?Y:F)(t,z)}function z(t,e,i){var n=i.pointers.length,s=i.changedPointers.length,o=e&we&&n-s===0,r=e&(ze|Ie)&&n-s===0;i.isFirst=!!o,i.isFinal=!!r,o&&(t.session={}),i.eventType=e,I(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function I(t,e){var i=t.session,n=e.pointers,s=n.length;i.firstInput||(i.firstInput=N(e)),s>1&&!i.firstMultiple?i.firstMultiple=N(e):1===s&&(i.firstMultiple=!1);var o=i.firstInput,r=i.firstMultiple,a=r?r.center:o.center,h=e.center=P(n);e.timeStamp=fe(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=M(a,h),e.distance=O(a,h),H(i,e),e.offsetDirection=L(e.deltaX,e.deltaY),e.scale=r?D(r.pointers,n):1,e.rotation=r?R(r.pointers,n):0,E(i,e);var l=t.element;m(e.srcEvent.target,l)&&(l=e.srcEvent.target),e.target=l}function H(t,e){var i=e.center,n=t.offsetDelta||{},s=t.prevDelta||{},o=t.prevInput||{};(e.eventType===we||o.eventType===ze)&&(s=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=s.x+(i.x-n.x),e.deltaY=s.y+(i.y-n.y)}function E(t,e){var i,s,o,r,a=t.lastInterval||e,h=e.timeStamp-a.timeStamp;if(e.eventType!=Ie&&(h>Se||a.velocity===n)){var l=a.deltaX-e.deltaX,c=a.deltaY-e.deltaY,d=A(h,l,c);s=d.x,o=d.y,i=ue(d.x)>ue(d.y)?d.x:d.y,r=L(l,c),t.lastInterval=e}else i=a.velocity,s=a.velocityX,o=a.velocityY,r=a.direction;e.velocity=i,e.velocityX=s,e.velocityY=o,e.direction=r}function N(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:de(t.pointers[i].clientX),clientY:de(t.pointers[i].clientY)},i++;return{timeStamp:fe(),pointers:e,center:P(e),deltaX:t.deltaX,deltaY:t.deltaY}}function P(t){var e=t.length;if(1===e)return{x:de(t[0].clientX),y:de(t[0].clientY)};for(var i=0,n=0,s=0;e>s;)i+=t[s].clientX,n+=t[s].clientY,s++;return{x:de(i/e),y:de(n/e)}}function A(t,e,i){return{x:e/t||0,y:i/t||0}}function L(t,e){return t===e?He:ue(t)>=ue(e)?t>0?Ee:Ne:e>0?Pe:Ae}function O(t,e,i){i||(i=Re);var n=e[i[0]]-t[i[0]],s=e[i[1]]-t[i[1]];return Math.sqrt(n*n+s*s)}function M(t,e,i){i||(i=Re);var n=e[i[0]]-t[i[0]],s=e[i[1]]-t[i[1]];return 180*Math.atan2(s,n)/Math.PI}function R(t,e){return M(e[1],e[0],De)-M(t[1],t[0],De)}function D(t,e){return O(e[0],e[1],De)/O(t[0],t[1],De)}function F(){this.evEl=_e,this.evWin=qe,this.allow=!0,this.pressed=!1,w.apply(this,arguments)}function _(){this.evEl=Xe,this.evWin=Ye,w.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function q(){this.evTarget=Be,this.evWin=Qe,this.started=!1,w.apply(this,arguments)}function W(t,e){var i=b(t.touches),n=b(t.changedTouches);return e&(ze|Ie)&&(i=T(i.concat(n),"identifier",!0)),[i,n]}function j(){this.evTarget=Ue,this.targetIds={},w.apply(this,arguments)}function X(t,e){var i=b(t.touches),n=this.targetIds;if(e&(we|ke)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var s,o,r=b(t.changedTouches),a=[],h=this.target;if(o=i.filter(function(t){return m(t.target,h)}),e===we)for(s=0;s<o.length;)n[o[s].identifier]=!0,s++;for(s=0;s<r.length;)n[r[s].identifier]&&a.push(r[s]),e&(ze|Ie)&&delete n[r[s].identifier],s++;return a.length?[T(o.concat(a),"identifier",!0),a]:void 0}function Y(){w.apply(this,arguments);var t=c(this.handler,this);this.touch=new j(this.manager,t),this.mouse=new F(this.manager,t)}function $(t,e){this.manager=t,this.set(e)}function B(t){if(g(t,ei))return ei;var e=g(t,ii),i=g(t,ni);return e&&i?ii+" "+ni:e||i?e?ii:ni:g(t,ti)?ti:Ke}function Q(t){this.id=x(),this.manager=null,this.options=h(t||{},this.defaults),this.options.enable=u(this.options.enable,!0),this.state=si,this.simultaneous={},this.requireFail=[]}function V(t){return t&li?"cancel":t&ai?"end":t&ri?"move":t&oi?"start":""}function U(t){return t==Ae?"down":t==Pe?"up":t==Ee?"left":t==Ne?"right":""}function G(t,e){var i=e.manager;return i?i.get(t):t}function Z(){Q.apply(this,arguments)}function J(){Z.apply(this,arguments),this.pX=null,this.pY=null}function K(){Z.apply(this,arguments)}function te(){Q.apply(this,arguments),this._timer=null,this._input=null}function ee(){Z.apply(this,arguments)}function ie(){Z.apply(this,arguments)}function ne(){Q.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function se(t,e){return e=e||{},e.recognizers=u(e.recognizers,se.defaults.preset),new oe(t,e)}function oe(t,e){e=e||{},this.options=h(e,se.defaults),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.element=t,this.input=k(this),this.touchAction=new $(this,this.options.touchAction),re(this,!0),r(e.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function re(t,e){var i=t.element;r(t.options.cssProps,function(t,n){i.style[C(i.style,n)]=e?t:""})}function ae(t,i){var n=e.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=i,i.target.dispatchEvent(n)}var he=["","webkit","moz","MS","ms","o"],le=e.createElement("div"),ce="function",de=Math.round,ue=Math.abs,fe=Date.now,pe=1,me=/mobile|tablet|ip(ad|hone|od)|android/i,ge="ontouchstart"in t,ve=C(t,"PointerEvent")!==n,ye=ge&&me.test(navigator.userAgent),be="touch",Te="pen",Ce="mouse",xe="kinect",Se=25,we=1,ke=2,ze=4,Ie=8,He=1,Ee=2,Ne=4,Pe=8,Ae=16,Le=Ee|Ne,Oe=Pe|Ae,Me=Le|Oe,Re=["x","y"],De=["clientX","clientY"];w.prototype={handler:function(){},init:function(){this.evEl&&f(this.element,this.evEl,this.domHandler),this.evTarget&&f(this.target,this.evTarget,this.domHandler),this.evWin&&f(S(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(S(this.element),this.evWin,this.domHandler)}};var Fe={mousedown:we,mousemove:ke,mouseup:ze},_e="mousedown",qe="mousemove mouseup";l(F,w,{handler:function(t){var e=Fe[t.type];e&we&&0===t.button&&(this.pressed=!0),e&ke&&1!==t.which&&(e=ze),this.pressed&&this.allow&&(e&ze&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:Ce,srcEvent:t}))}});var We={pointerdown:we,pointermove:ke,pointerup:ze,pointercancel:Ie,pointerout:Ie},je={2:be,3:Te,4:Ce,5:xe},Xe="pointerdown",Ye="pointermove pointerup pointercancel";t.MSPointerEvent&&(Xe="MSPointerDown",Ye="MSPointerMove MSPointerUp MSPointerCancel"),l(_,w,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),s=We[n],o=je[t.pointerType]||t.pointerType,r=o==be,a=y(e,t.pointerId,"pointerId");s&we&&(0===t.button||r)?0>a&&(e.push(t),a=e.length-1):s&(ze|Ie)&&(i=!0),0>a||(e[a]=t,this.callback(this.manager,s,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),i&&e.splice(a,1))}});var $e={touchstart:we,touchmove:ke,touchend:ze,touchcancel:Ie},Be="touchstart",Qe="touchstart touchmove touchend touchcancel";l(q,w,{handler:function(t){var e=$e[t.type];if(e===we&&(this.started=!0),this.started){var i=W.call(this,t,e);e&(ze|Ie)&&i[0].length-i[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:be,srcEvent:t})}}});var Ve={touchstart:we,touchmove:ke,touchend:ze,touchcancel:Ie},Ue="touchstart touchmove touchend touchcancel";l(j,w,{handler:function(t){var e=Ve[t.type],i=X.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:be,srcEvent:t})}}),l(Y,w,{handler:function(t,e,i){var n=i.pointerType==be,s=i.pointerType==Ce;if(n)this.mouse.allow=!1;else if(s&&!this.mouse.allow)return;e&(ze|Ie)&&(this.mouse.allow=!0),this.callback(t,e,i)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ge=C(le.style,"touchAction"),Ze=Ge!==n,Je="compute",Ke="auto",ti="manipulation",ei="none",ii="pan-x",ni="pan-y";$.prototype={set:function(t){t==Je&&(t=this.compute()),Ze&&(this.manager.element.style[Ge]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return r(this.manager.recognizers,function(e){d(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),B(t.join(" "))},preventDefaults:function(t){if(!Ze){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var n=this.actions,s=g(n,ei),o=g(n,ni),r=g(n,ii);return s||o&&i&Le||r&&i&Oe?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var si=1,oi=2,ri=4,ai=8,hi=ai,li=16,ci=32;Q.prototype={defaults:{},set:function(t){return a(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(o(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=G(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return o(t,"dropRecognizeWith",this)?this:(t=G(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(o(t,"requireFailure",this))return this;var e=this.requireFail;return t=G(t,this),-1===y(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(o(t,"dropRequireFailure",this))return this;t=G(t,this);var e=y(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){i.manager.emit(i.options.event+(e?V(n):""),t)}var i=this,n=this.state;ai>n&&e(!0),e(),n>=ai&&e(!0)},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=ci)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(ci|si)))return!1;t++}return!0},recognize:function(t){var e=a({},t);return d(this.options.enable,[this,e])?(this.state&(hi|li|ci)&&(this.state=si),this.state=this.process(e),void(this.state&(oi|ri|ai|li)&&this.tryEmit(e))):(this.reset(),void(this.state=ci))},process:function(){},getTouchAction:function(){},reset:function(){}},l(Z,Q,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=e&(oi|ri),s=this.attrTest(t);return n&&(i&Ie||!s)?e|li:n||s?i&ze?e|ai:e&oi?e|ri:oi:ci}}),l(J,Z,{defaults:{event:"pan",threshold:10,pointers:1,direction:Me},getTouchAction:function(){var t=this.options.direction,e=[];return t&Le&&e.push(ni),t&Oe&&e.push(ii),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,s=t.direction,o=t.deltaX,r=t.deltaY;return s&e.direction||(e.direction&Le?(s=0===o?He:0>o?Ee:Ne,i=o!=this.pX,n=Math.abs(t.deltaX)):(s=0===r?He:0>r?Pe:Ae,i=r!=this.pY,n=Math.abs(t.deltaY))),t.direction=s,i&&n>e.threshold&&s&e.direction},attrTest:function(t){return Z.prototype.attrTest.call(this,t)&&(this.state&oi||!(this.state&oi)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=U(t.direction);e&&this.manager.emit(this.options.event+e,t),this._super.emit.call(this,t)}}),l(K,Z,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ei]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&oi)},emit:function(t){if(this._super.emit.call(this,t),1!==t.scale){var e=t.scale<1?"in":"out";this.manager.emit(this.options.event+e,t)}}}),l(te,Q,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[Ke]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,o=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(ze|Ie)&&!o)this.reset();else if(t.eventType&we)this.reset(),this._timer=s(function(){this.state=hi,this.tryEmit()},e.time,this);else if(t.eventType&ze)return hi;return ci},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===hi&&(t&&t.eventType&ze?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=fe(),this.manager.emit(this.options.event,this._input)))}}),l(ee,Z,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ei]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&oi)
}}),l(ie,Z,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:Le|Oe,pointers:1},getTouchAction:function(){return J.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(Le|Oe)?e=t.velocity:i&Le?e=t.velocityX:i&Oe&&(e=t.velocityY),this._super.attrTest.call(this,t)&&i&t.direction&&t.distance>this.options.threshold&&ue(e)>this.options.velocity&&t.eventType&ze},emit:function(t){var e=U(t.direction);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),l(ne,Q,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[ti]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,o=t.deltaTime<e.time;if(this.reset(),t.eventType&we&&0===this.count)return this.failTimeout();if(n&&o&&i){if(t.eventType!=ze)return this.failTimeout();var r=this.pTime?t.timeStamp-this.pTime<e.interval:!0,a=!this.pCenter||O(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,a&&r?this.count+=1:this.count=1,this._input=t;var h=this.count%e.taps;if(0===h)return this.hasRequireFailures()?(this._timer=s(function(){this.state=hi,this.tryEmit()},e.interval,this),oi):hi}return ci},failTimeout:function(){return this._timer=s(function(){this.state=ci},this.options.interval,this),ci},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==hi&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),se.VERSION="2.0.4",se.defaults={domEvents:!1,touchAction:Je,enable:!0,inputTarget:null,inputClass:null,preset:[[ee,{enable:!1}],[K,{enable:!1},["rotate"]],[ie,{direction:Le}],[J,{direction:Le},["swipe"]],[ne],[ne,{event:"doubletap",taps:2},["tap"]],[te]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var di=1,ui=2;oe.prototype={set:function(t){return a(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?ui:di},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var i,n=this.recognizers,s=e.curRecognizer;(!s||s&&s.state&hi)&&(s=e.curRecognizer=null);for(var o=0;o<n.length;)i=n[o],e.stopped===ui||s&&i!=s&&!i.canRecognizeWith(s)?i.reset():i.recognize(t),!s&&i.state&(oi|ri|ai)&&(s=e.curRecognizer=i),o++}},get:function(t){if(t instanceof Q)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(o(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(o(t,"remove",this))return this;var e=this.recognizers;return t=this.get(t),e.splice(y(e,t),1),this.touchAction.update(),this},on:function(t,e){var i=this.handlers;return r(v(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this},off:function(t,e){var i=this.handlers;return r(v(t),function(t){e?i[t].splice(y(i[t],e),1):delete i[t]}),this},emit:function(t,e){this.options.domEvents&&ae(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](e),n++}},destroy:function(){this.element&&re(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},a(se,{INPUT_START:we,INPUT_MOVE:ke,INPUT_END:ze,INPUT_CANCEL:Ie,STATE_POSSIBLE:si,STATE_BEGAN:oi,STATE_CHANGED:ri,STATE_ENDED:ai,STATE_RECOGNIZED:hi,STATE_CANCELLED:li,STATE_FAILED:ci,DIRECTION_NONE:He,DIRECTION_LEFT:Ee,DIRECTION_RIGHT:Ne,DIRECTION_UP:Pe,DIRECTION_DOWN:Ae,DIRECTION_HORIZONTAL:Le,DIRECTION_VERTICAL:Oe,DIRECTION_ALL:Me,Manager:oe,Input:w,TouchAction:$,TouchInput:j,MouseInput:F,PointerEventInput:_,TouchMouseInput:Y,SingleTouchInput:q,Recognizer:Q,AttrRecognizer:Z,Tap:ne,Pan:J,Swipe:ie,Pinch:K,Rotate:ee,Press:te,on:f,off:p,each:r,merge:h,extend:a,inherit:l,bindFn:c,prefixed:C}),typeof define==ce&&define.amd?define(function(){return se}):"undefined"!=typeof module&&module.exports?module.exports=se:t[i]=se}(window,document,"Hammer"),!function(t){t.fn.columnize=function(e){function i(t,e){try{t.append(e)}catch(i){t[0].appendChild(e[0])}}this.cols=[],this.offset=0,this.before=[],this.lastOther=0,this.prevMax=0,this.debug=0,this.setColumnStart=null,this.elipsisText="";var n={width:400,columns:!1,buildOnce:!1,overflow:!1,doneFunc:function(){},target:!1,ignoreImageLoading:!0,columnFloat:"left",lastNeverTallest:!1,accuracy:!1,precise:!1,manualBreaks:!1,cssClassPrefix:"",elipsisText:"...",debug:0};return e=t.extend(n,e),"string"==typeof e.width&&(e.width=parseInt(e.width,10),isNaN(e.width)&&(e.width=n.width)),"function"==typeof e.setColumnStart&&(this.setColumnStart=e.setColumnStart),"string"==typeof e.elipsisText&&(this.elipsisText=e.elipsisText),e.debug&&(this.debug=e.debug),e.setWidth||(e.setWidth=e.precise?function(t){return 100/t}:function(t){return Math.floor(100/t)}),this.each(function(){function s(t,e){var i=e?".":"";return m.length?i+m+"-"+t:i+t}function o(n,o,r,a){for(;(p||r.height()<a)&&o[0].childNodes.length;){var h=o[0].childNodes[0];if(t(h).find(s("columnbreak",!0)).length)return;if(t(h).hasClass(s("columnbreak")))return;i(n,t(h))}if(0!==n[0].childNodes.length){var l=n[0].childNodes,c=l[l.length-1];n[0].removeChild(c);var d=t(c);if(3==d[0].nodeType){var u=d[0].nodeValue,f=e.width/18;e.accuracy&&(f=e.accuracy);for(var m,g=null;r.height()<a&&u.length;){var v=u.indexOf(" ",f);m=-1!=v?u.substring(0,v):u,g=document.createTextNode(m),i(n,t(g)),u=u.length>f&&-1!=v?u.substring(v):""}if(r.height()>=a&&null!==g&&(n[0].removeChild(g),u=g.nodeValue+u),!u.length)return!1;d[0].nodeValue=u}return o.contents().length?o.prepend(d):i(o,d),3==d[0].nodeType}}function r(t,e,n,a){if(!t.contents(":last").find(s("columnbreak",!0)).length&&!t.contents(":last").hasClass(s("columnbreak"))&&e.contents().length){var h=e.contents(":first");if("undefined"==typeof h.get(0)||1!=h.get(0).nodeType)return;var l=h.clone(!0);if(h.hasClass(s("columnbreak")))i(t,l),h.remove();else if(p)i(t,l),h.remove();else if(1==l.get(0).nodeType&&!l.hasClass(s("dontend")))if(i(t,l),l.is("img")&&n.height()<a+20)h.remove();else if(h.hasClass(s("dontsplit"))&&n.height()<a+20)h.remove();else if(l.is("img")||h.hasClass(s("dontsplit")))l.remove();else{if(l.empty(),o(l,h,n,a))h.addClass(s("split"));else{if(h.addClass(s("split")),"OL"==h.get(0).tagName){var c=l.get(0).childElementCount+l.get(0).start;h.attr("start",c+1)}h.children().length&&r(l,h,n,a)}0===l.get(0).childNodes.length&&(l.remove(),h.removeClass(s("split")))}}}function a(){if(!c.data("columnized")||1!=c.children().length){if(c.data("columnized",!0),c.data("columnizing",!0),c.empty(),c.append(t("<div class='"+s("first")+" "+s("last")+" "+s("column")+" ' style='width:100%; float: "+e.columnFloat+";'></div>")),$col=c.children().eq(c.children().length-1),$destroyable=u.clone(!0),e.overflow){for(targetHeight=e.overflow.height,o($col,$destroyable,$col,targetHeight),$destroyable.contents().find(":first-child").hasClass(s("dontend"))||r($col,$destroyable,$col,targetHeight);$col.contents(":last").length&&h($col.contents(":last").get(0));){var n=$col.contents(":last");n.remove(),$destroyable.prepend(n)}for(var a="",l=document.createElement("DIV");$destroyable[0].childNodes.length>0;){var d=$destroyable[0].childNodes[0];if(d.attributes)for(var f=0;f<d.attributes.length;f++)0===d.attributes[f].nodeName.indexOf("jQuery")&&d.removeAttribute(d.attributes[f].nodeName);l.innerHTML="",l.appendChild($destroyable[0].childNodes[0]),a+=l.innerHTML}var p=t(e.overflow.id)[0];p.innerHTML=a}else i($col,$destroyable.contents());c.data("columnizing",!1),e.overflow&&e.overflow.doneFunc&&e.overflow.doneFunc(),e.doneFunc()}}function h(e){return 3==e.nodeType?/^\s+$/.test(e.nodeValue)?e.previousSibling?h(e.previousSibling):!1:!1:1!=e.nodeType?!1:t(e).hasClass(s("dontend"))?!0:0===e.childNodes.length?!1:h(e.childNodes[e.childNodes.length-1])}function l(){if(g=0,f!=c.width()){f=c.width();var n=Math.round(c.width()/e.width),l=e.width,m=e.height;if(e.columns&&(n=e.columns),p&&(n=u.find(s("columnbreak",!0)).length+1,l=!1),1>=n)return a();if(!c.data("columnizing")){c.data("columnized",!0),c.data("columnizing",!0),c.empty(),c.append(t("<div style='width:"+e.setWidth(n)+"%; float: "+e.columnFloat+";'></div>")),S=c.children(":last"),i(S,u.clone()),d=S.height(),c.empty();var v=d/n,y=3,b=!1;e.overflow?(y=1,v=e.overflow.height):m&&l&&(y=1,v=m,b=!0);for(var T=0;y>T&&20>T;T++){c.empty();var C,x,S,w;try{C=u.clone(!0)}catch(k){C=u.clone()}C.css("visibility","hidden");for(var z=0;n>z;z++)x=0===z?s("first"):"",x+=" "+s("column"),x=z==n-1?s("last")+" "+x:x,c.append(t("<div class='"+x+"' style='width:"+e.setWidth(n)+"%; float: "+e.columnFloat+";'></div>"));for(z=0;z<n-(e.overflow?0:1)||b&&C.contents().length;){for(c.children().length<=z&&c.append(t("<div class='"+x+"' style='width:"+e.setWidth(n)+"%; float: "+e.columnFloat+";'></div>")),S=c.children().eq(z),b&&S.width(l+"px"),o(S,C,S,v),r(S,C,S,v);S.contents(":last").length&&h(S.contents(":last").get(0));)w=S.contents(":last"),w.remove(),C.prepend(w);z++,0===S.contents().length&&C.contents().length?S.append(C.contents(":first")):z!=n-(e.overflow?0:1)||e.overflow||C.find(s("columnbreak",!0)).length&&n++}if(e.overflow&&!b){var I=!1,H=document.all&&-1!=navigator.appVersion.indexOf("MSIE 7.");if(I||H){for(var E="",N=document.createElement("DIV");C[0].childNodes.length>0;){var P=C[0].childNodes[0];for(z=0;z<P.attributes.length;z++)0===P.attributes[z].nodeName.indexOf("jQuery")&&P.removeAttribute(P.attributes[z].nodeName);N.innerHTML="",N.appendChild(C[0].childNodes[0]),E+=N.innerHTML}var A=t(e.overflow.id)[0];A.innerHTML=E}else t(e.overflow.id).empty().append(C.contents().clone(!0))}else if(b)c.children().each(function(t){S=c.children().eq(t),S.width(l+"px"),0===t?S.addClass(s("first")):t==c.children().length-1?S.addClass(s("last")):(S.removeClass(s("first")),S.removeClass(s("last")))}),c.width(c.children().length*l+"px");else{S=c.children().eq(c.children().length-1),C.contents().each(function(){S.append(t(this))}),S.height();var L=0,O=1e7,M=0,R=!1,D=0;c.children().each(function(t){return function(e){var i=t.children().eq(e),n=i.children(":last").find(s("columnbreak",!0)).length;if(!n){var o=i.height();R=!1,L+=o,o>M&&(M=o,R=!0),O>o&&(O=o),D++}}}(c));var F=L/D;0===L?T=y:e.lastNeverTallest&&R?(g+=5,v+=30,T==y-1&&y++):M-O>30?v=F+30:Math.abs(F-v)>20?v=F:T=y}c.append(t("<br style='clear:both;'>"))}c.find(s("column",!0)).find(":first"+s("removeiffirst",!0)).remove(),c.find(s("column",!0)).find(":last"+s("removeiflast",!0)).remove(),c.find(s("split",!0)).find(":first"+s("removeiffirst",!0)).remove(),c.find(s("split",!0)).find(":last"+s("removeiflast",!0)).remove(),c.data("columnizing",!1),e.overflow&&e.overflow.doneFunc(),e.doneFunc()}}}var c=e.target?t(e.target):t(this),d=t(this).height(),u=t("<div></div>"),f=0,p=e.manualBreaks,m=n.cssClassPrefix;"string"==typeof e.cssClassPrefix&&(m=e.cssClassPrefix);var g=0;if(i(u,t(this).contents().clone(!0)),!e.ignoreImageLoading&&!e.target&&!c.data("imageLoaded")&&(c.data("imageLoaded",!0),t(this).find("img").length>0)){var v=function(t,n){return function(){t.data("firstImageLoaded")||(t.data("firstImageLoaded","true"),i(t.empty(),n.children().clone(!0)),t.columnize(e))}}(t(this),u);return t(this).find("img").one("load",v),t(this).find("img").one("abort",v),void 0}c.empty(),l(),e.buildOnce||t(window).resize(function(){e.buildOnce||(c.data("timeout")&&clearTimeout(c.data("timeout")),c.data("timeout",setTimeout(l,200)))})})},t.fn.renumberByJS=function(e,i,n,s){if(this.setList=function(e,i,n){var s,o=this.before.parents();if(s=t(e[this.offset-1]).find(">*"),s.last()[0].tagName!=n.toUpperCase())return this.debug&&console.log("Last item in previous column, isn't a list..."),0;s=s.length;var r=1;if(r=this.lastOther<=0?this.before.children().length+1:t(o[this.lastOther]).children().length+1,t(e[this.offset]).find(n+":first li.split").length){var a=t(e[this.offset-1]).find(n+":last li:last");if(""===this.elipsisText||t(e[this.offset-1]).find(n+":last ~ div").length||t(e[this.offset-1]).find(n+":last ~ p").length);else if(0==t(a).find("ul, ol, dl").length){var h=a.last().text(),l=h.length;";"==h.substring(l-1)?h.substring(l-4)!=this.elipsisText+";"&&(h=h.substring(0,l-1)+this.elipsisText+";"):h.substring(l-3)!=this.elipsisText&&(h+=this.elipsisText),a.last().text(h)}0==t(e[this.offset]).find(n+":first >li.split >"+n).length&&r--}if(1==s&&(r+=this.prevMax),this.nest>1){this.debug&&console.log("Supposed to be a nested list...decr"),r--;var c=t(e[this.offset-1]).find(n+":first li.split:first");c.length>0&&(this.debug&&console.log("Previous column started with a split item, so that count is one less than expected"),r--),c=t(e[this.offset]).find(n+":first li:first").clone(),c.children().remove(),t.trim(c.text()).length>0&&(this.debug&&console.log("If that was a complete list in the previous column, don't decr."),r++,0==t(e[this.offset-1]).find(">"+n+":last ").children().length&&(this.debug&&console.log("unless that was empty, in which case revert"),r--))}else{var c=t(e[this.offset]).find(n+":first li:first "+n+".split li.split");c.length>0&&(this.debug&&console.log("[Nested] Column started with a split item, so that count is one less than expected"),r--)}return this.debug&&console.log("Setting the start value to "+r+" ("+this.prevMax+")"),r>0&&("function"==typeof this.setColumnStart?this.setColumnStart(i,r):i.attr("start",r)),0},"undefined"==typeof n&&(n=!1),"undefined"==typeof s&&(s=!1),!n&&!s)throw"renumberByJS(): Bad param, must pass an id or a class";var o="";this.prevMax=1,o=s?"."+s:"#"+n;var r=e.toLowerCase(),a=e.toUpperCase();for(this.cols=t(o),this.debug&&console.log("There are "+this.cols.length+" items, looking for "+r),this.before=t(this.cols[0]).find(r+":last"),this.prevMax=this.before.children().length,this.offset=1;this.offset<this.cols.length;this.offset++)if(this.debug&&console.log("iterating "+this.offset+"...[of "+this.cols.length+"]"),0!=this.offset%i){if(this.before=t(this.cols[this.offset-1]).find(r+":last"),this.before.length){this.debug&&console.log("Have some "+e+" elements in the previous column");var h=t(this.cols[this.offset]).find(r+":first"),l=t(this.cols[this.offset]).find("*:first");if(l[0]!==h[0])continue;var c=this.before.parents();this.lastOther=0;for(var d=!1;this.lastOther<c.length;this.lastOther++)if(c[this.lastOther].tagName!=a&&"LI"!=c[this.lastOther].tagName){d=!0,this.lastOther--;break}this.nest=1,t(this.cols[this.offset]).find(">"+r+":first li "+r+":first").length&&(this.nest=2),this.setList(this.cols,h,r),this.lastOther--,h=t(this.cols[this.offset]).find(r+":first li "+r+":first"),h.length&&(this.before=t(this.cols[this.offset-1]).find(">"+r+":last li "+r+":last"),this.prevMax=0,this.nest=1,this.setList(this.cols,h,r));var u=t(this.cols[this.offset-1]).find(">"+r+":last");this.prevMax=u.children().length}}else this.debug&&console.log("First column (in theory..)"),this.prevMax=1;return 0}}(jQuery);